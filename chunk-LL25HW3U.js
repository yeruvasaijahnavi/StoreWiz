import{a as B,b as R}from"./chunk-TLFITDCG.js";import{Aa as w,Ba as y,Da as M,Jb as j,Kb as L,db as F,la as _,o as I,p as S,q as E,r as T}from"./chunk-OXXXM4EK.js";import{x as U}from"./chunk-YHGVW4GW.js";import{a as P}from"./chunk-KMW6CVZW.js";import{Fc as D,Gb as s,Rb as n,Sb as o,Tb as l,Z as u,ab as a,ac as C,ad as v,bb as f,ca as h,jd as O,mc as b,nc as p,pa as m,pb as g,pd as x,wb as d}from"./chunk-HB3EFGHP.js";var $=(()=>{class e{constructor(t){this.http=t,this.baseUrl=`${P.apiUrl}/dashboard`}getTotalOrders(){return this.http.get(`${this.baseUrl}/orders-total-count`)}getDistinctCustomerCount(){return this.http.get(`${this.baseUrl}/orders-distinct-customers`)}getOrderStatusDistribution(){return this.http.get(`${this.baseUrl}/orders-status-distribution`)}static{this.\u0275fac=function(r){return new(r||e)(h(x))}}static{this.\u0275prov=u({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function V(e,c){e&1&&(m(),l(0,"svg",7))}function z(e,c){e&1&&(m(),l(0,"svg",8))}function A(e,c){if(e&1&&(n(0,"div")(1,"h3",9),p(2,"Order Status"),o(),l(3,"c-chart",10),o()),e&2){let t=C();a(3),s("data",t.pieChartData)}}function W(e,c){e&1&&(n(0,"div",11)(1,"p"),p(2,"Loading chart..."),o()())}var ot=(()=>{class e{constructor(t){this.orderDashboardService=t,this.totalOrders=null,this.customerCount=null,this.pieChartData={labels:[],datasets:[{backgroundColor:["#FF6384","#36A2EB","#FFCE56","#4BC0C0"],data:[]}]},this.data={labels:["VueJs","EmberJs","ReactJs","Angular"],datasets:[{backgroundColor:["#41B883","#E46651","#00D8FF","#DD1B16"],data:[40,20,80,10]}]},this.isPieChartDataLoaded=!1}ngOnInit(){this.fetchTotalOrders(),this.fetchDistinctCustomerCount(),this.fetchOrderStatusDistribution()}fetchOrderStatusDistribution(){this.orderDashboardService.getOrderStatusDistribution().subscribe({next:t=>{this.pieChartData.labels=t.map(r=>r.status),this.pieChartData.datasets[0].data=t.map(r=>r.count),this.isPieChartDataLoaded=!0,console.log("Pie chart data loaded:",this.pieChartData.labels,this.pieChartData.datasets[0].data)},error:t=>console.error("Error fetching order status distribution:",t)})}fetchTotalOrders(){this.orderDashboardService.getTotalOrders().subscribe({next:t=>{console.log(t),this.totalOrders=t.totalOrders},error:t=>console.error("Error fetching total orders:",t)})}fetchDistinctCustomerCount(){this.orderDashboardService.getDistinctCustomerCount().subscribe({next:t=>{console.log("dist cust",t),this.customerCount=t.distinctCustomers},error:t=>console.error("Error fetching customer count:",t)})}static{this.\u0275fac=function(r){return new(r||e)(f($))}}static{this.\u0275cmp=g({type:e,selectors:[["app-order-dashboard"]],decls:10,vars:6,consts:[["loadingTemplate",""],[1,"my-4"],["xl","6","lg","6","md","6","sm","12",1,"margin-class"],["color","warning","padding","",3,"title","value"],["cTemplateId","widgetIconTemplate"],["color","info","padding","",3,"title","value"],[4,"ngIf","ngIfElse"],["cIcon","","name","cilInbox","size","xl","width","32"],["cIcon","","name","cilPeople","size","xl","width","32"],[1,"inline","mx-auto"],["type","doughnut",1,"w-50","mx-auto",3,"data"],[1,"text-center"]],template:function(r,i){if(r&1&&(n(0,"c-row",1)(1,"c-col",2)(2,"c-widget-stat-f",3),d(3,V,1,0,"ng-template",4),o()(),n(4,"c-col",2)(5,"c-widget-stat-f",5),d(6,z,1,0,"ng-template",4),o()()(),d(7,A,4,1,"div",6)(8,W,3,0,"ng-template",null,0,D)),r&2){let k=b(9);a(2),s("title","Total Orders")("value",i.totalOrders!==null?i.totalOrders:"Loading..."),a(3),s("title","Distinct Customers")("value",i.customerCount!==null?i.customerCount:"Loading..."),a(2),s("ngIf",i.isPieChartDataLoaded)("ngIfElse",k)}},dependencies:[U,T,E,L,j,F,_,R,B,S,I,w,y,M,O,v],encapsulation:2})}}return e})();export{ot as a};
