import{a as C}from"./chunk-LZAOTZ5E.js";import{$ as P,_}from"./chunk-K5ZH4Z24.js";import{f as O}from"./chunk-WXVBONAT.js";import"./chunk-KEDPSKOD.js";import{Jb as r,Kb as e,Nc as h,Oc as S,Tc as E,Ub as u,Vc as I,Ya as o,Za as g,ec as t,fc as d,gc as c,ib as f,pb as p,pc as v,rc as x,zb as a}from"./chunk-55627RH7.js";import"./chunk-4CLCTAJ7.js";function y(n,l){if(n&1&&(r(0,"div",6)(1,"h4"),t(2),e(),r(3,"p")(4,"strong"),t(5,"Customer:"),e(),t(6),e(),r(7,"p")(8,"strong"),t(9,"Assigned Staff:"),e(),t(10),e(),r(11,"p")(12,"strong"),t(13,"Status:"),e(),t(14),e()()),n&2){let i=u();o(2),c("Order ID: ",i.order.orderId,""),o(4),c(" ",i.order.customerId,""),o(4),c(" ",i.order.assignedStaff==null?null:i.order.assignedStaff.name,""),o(4),c(" ",i.order.status,"")}}function V(n,l){if(n&1&&(r(0,"tr")(1,"td"),t(2),e(),r(3,"td"),t(4),e(),r(5,"td"),t(6),e(),r(7,"td"),t(8),v(9,"date"),e()()),n&2){let i=l.$implicit,s=l.index;o(2),d(s+1),o(2),d(i.actionType),o(2),d(i.description),o(2),d(x(9,4,i.actionDate,"short"))}}function D(n,l){if(n&1&&(r(0,"div")(1,"table",7)(2,"thead")(3,"tr")(4,"th"),t(5,"#"),e(),r(6,"th"),t(7,"Action Type"),e(),r(8,"th"),t(9,"Description"),e(),r(10,"th"),t(11,"Action Date"),e()()(),r(12,"tbody"),p(13,V,10,7,"tr",8),e()()()),n&2){let i=u();o(13),a("ngForOf",i.auditLogs)}}function b(n,l){n&1&&(r(0,"div")(1,"p"),t(2,"No audit logs available."),e()())}var k=(()=>{class n{constructor(i,s){this.route=i,this.orderProcessingService=s,this.order=null,this.auditLogs=[],this.statuses=["pending","assigned","packed","shipped","delivered"],this.progressValue=0}ngOnInit(){let i=this.route.snapshot.paramMap.get("id");i&&this.fetchOrderDetails(i)}fetchOrderDetails(i){this.orderProcessingService.getOrderDetails(i).subscribe({next:s=>{this.order=s.order,this.auditLogs=s.auditLogs,console.log("Order details:",s),this.calculateProgressValue()},error:s=>{console.error("Error fetching order details:",s)}})}calculateProgressValue(){return this.progressValue=(this.statuses.indexOf(this.order.status)+1)*(100/this.statuses.length),this.progressValue}static{this.\u0275fac=function(s){return new(s||n)(g(O),g(C))}}static{this.\u0275cmp=f({type:n,selectors:[["app-order-processing-view"]],decls:13,vars:6,consts:[[1,"container"],[1,"my-4"],["class","mb-4",4,"ngIf"],["color","success","variant","striped",3,"animated","value"],[1,"mt-4"],[4,"ngIf"],[1,"mb-4"],[1,"table","table-striped"],[4,"ngFor","ngForOf"]],template:function(s,m){s&1&&(r(0,"div",0)(1,"h2",1),t(2,"Order Details"),e(),p(3,y,15,4,"div",2),r(4,"h4"),t(5,"Order Progress"),e(),r(6,"c-progress-stacked")(7,"c-progress",3),t(8),e()(),r(9,"h4",4),t(10,"Order Processing History"),e(),p(11,D,14,1,"div",5)(12,b,3,0,"div",5),e()),s&2&&(o(3),a("ngIf",m.order),o(4),a("animated",!0)("value",m.progressValue),o(),d(m.order.status),o(3),a("ngIf",m.auditLogs.length>0),o(),a("ngIf",m.auditLogs.length===0))},dependencies:[I,h,S,E,P,_],encapsulation:2})}}return n})();export{k as OrderProcessingViewComponent};
