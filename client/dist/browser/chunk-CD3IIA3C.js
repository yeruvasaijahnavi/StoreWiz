import{a as C}from"./chunk-LZAOTZ5E.js";import{a as w}from"./chunk-DUGBZV3X.js";import{h as b}from"./chunk-WXVBONAT.js";import"./chunk-KEDPSKOD.js";import{Jb as t,Kb as r,Nc as O,Pb as x,Sb as I,Tc as E,Ub as P,Vc as _,Ya as s,Za as c,ba as g,ec as i,fc as d,gc as l,ib as h,la as f,ma as u,pb as S,pc as m,rc as p,zb as v}from"./chunk-55627RH7.js";import"./chunk-4CLCTAJ7.js";function y(o,D){if(o&1){let e=x();t(0,"tr",7)(1,"td"),i(2),r(),t(3,"td"),i(4),r(),t(5,"td"),i(6),r(),t(7,"td"),i(8),m(9,"date"),r(),t(10,"td"),i(11),m(12,"date"),r(),t(13,"td"),i(14),r(),t(15,"td")(16,"div",8)(17,"span",9),I("click",function(){let a=f(e).$implicit,A=P();return u(A.router.navigate(["/order-processing/view",a.orderId.orderId]))}),i(18," View "),r()()()()}if(o&2){let e=D.$implicit;s(2),l("P",e._id==null?null:e._id.slice(-3),""),s(2),d(e.orderId==null?null:e.orderId.orderId),s(2),d(e.orderId==null?null:e.orderId.status),s(2),d(p(9,6,e.startDate,"short")),s(3),l(" ",e.completionDate?p(12,9,e.completionDate,"short"):"N/A"," "),s(3),l(" ",!(e.orderId==null||e.orderId.assignedStaff==null)&&e.orderId.assignedStaff.name?e.orderId==null||e.orderId.assignedStaff==null?null:e.orderId.assignedStaff.name:"Not Assigned"," ")}}var B=(()=>{class o{constructor(e,n){this.orderProcessingService=e,this.authService=n,this.orderProcessings=[],this.filteredOrderProcessings=[],this.router=g(b)}ngOnInit(){this.getAllOrderProcessing()}getAllOrderProcessing(){this.orderProcessingService.getAllOrderProcessing().subscribe({next:e=>{this.orderProcessings=e,console.log("Order processing details:",e),this.filterOrderProcessings()},error:e=>{console.error("Error fetching order processing details:",e)}})}filterOrderProcessings(){let e=this.authService.getUser();e.role==="staff"?(this.filteredOrderProcessings=this.orderProcessings.filter(n=>n.orderId.assignedStaff&&n.orderId.assignedStaff.email===e.email),console.log("Filtered order processing",this.filteredOrderProcessings)):this.filteredOrderProcessings=this.orderProcessings}viewOrder(e){this.router.navigate(["view",e])}static{this.\u0275fac=function(n){return new(n||o)(c(C),c(w))}}static{this.\u0275cmp=h({type:o,selectors:[["app-order-processing-list"]],decls:23,vars:1,consts:[[1,"container","mt-4"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"mb-0"],["cTable","","hover","",1,"table","table-bordered","table-striped"],[1,"table-primary"],["scope","col"],["class","table-row-hover",4,"ngFor","ngForOf"],[1,"table-row-hover"],[1,"d-flex","align-items-center"],["title","View",1,"text-info","me-3",3,"click"]],template:function(n,a){n&1&&(t(0,"div",0)(1,"div",1)(2,"h2",2),i(3,"Order Processing List"),r()(),t(4,"table",3)(5,"thead",4)(6,"tr")(7,"th",5),i(8,"Process ID"),r(),t(9,"th",5),i(10,"Order ID"),r(),t(11,"th",5),i(12,"Status"),r(),t(13,"th",5),i(14,"Start Date"),r(),t(15,"th",5),i(16,"Completion Date"),r(),t(17,"th",5),i(18,"Assigned Staff"),r(),t(19,"th",5),i(20,"Actions"),r()()(),t(21,"tbody"),S(22,y,19,12,"tr",6),r()()()),n&2&&(s(22),v("ngForOf",a.filteredOrderProcessings))},dependencies:[_,O,E],encapsulation:2})}}return o})();export{B as OrderProcessingListComponent};
