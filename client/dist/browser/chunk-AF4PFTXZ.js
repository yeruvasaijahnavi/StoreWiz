import{a as C}from"./chunk-K3FUZSZP.js";import{bb as _,cb as P}from"./chunk-OXXXM4EK.js";import{f as O}from"./chunk-OBMS4ODY.js";import"./chunk-KEDPSKOD.js";import{$c as h,Cc as v,Ec as x,Gb as a,Rb as n,Sb as e,ab as o,ac as u,ad as S,bb as g,fd as E,jd as I,nc as t,oc as d,pb as f,pc as c,wb as p}from"./chunk-HB3EFGHP.js";import"./chunk-JKOY2XUY.js";function y(r,l){if(r&1&&(n(0,"div",6)(1,"h4"),t(2),e(),n(3,"p")(4,"strong"),t(5,"Customer:"),e(),t(6),e(),n(7,"p")(8,"strong"),t(9,"Assigned Staff:"),e(),t(10),e(),n(11,"p")(12,"strong"),t(13,"Status:"),e(),t(14),e()()),r&2){let i=u();o(2),c("Order ID: ",i.order.orderId,""),o(4),c(" ",i.order.customerId,""),o(4),c(" ",i.order.assignedStaff==null?null:i.order.assignedStaff.name,""),o(4),c(" ",i.order.status,"")}}function V(r,l){if(r&1&&(n(0,"tr")(1,"td"),t(2),e(),n(3,"td"),t(4),e(),n(5,"td"),t(6),e(),n(7,"td"),t(8),v(9,"date"),e()()),r&2){let i=l.$implicit,s=l.index;o(2),d(s+1),o(2),d(i.actionType),o(2),d(i.description),o(2),d(x(9,4,i.actionDate,"short"))}}function D(r,l){if(r&1&&(n(0,"div")(1,"table",7)(2,"thead")(3,"tr")(4,"th"),t(5,"#"),e(),n(6,"th"),t(7,"Action Type"),e(),n(8,"th"),t(9,"Description"),e(),n(10,"th"),t(11,"Action Date"),e()()(),n(12,"tbody"),p(13,V,10,7,"tr",8),e()()()),r&2){let i=u();o(13),a("ngForOf",i.auditLogs)}}function b(r,l){r&1&&(n(0,"div")(1,"p"),t(2,"No audit logs available."),e()())}var k=(()=>{class r{constructor(i,s){this.route=i,this.orderProcessingService=s,this.order=null,this.auditLogs=[],this.statuses=["pending","assigned","packed","shipped","delivered"],this.progressValue=0}ngOnInit(){let i=this.route.snapshot.paramMap.get("id");i&&this.fetchOrderDetails(i)}fetchOrderDetails(i){this.orderProcessingService.getOrderDetails(i).subscribe({next:s=>{this.order=s.order,this.auditLogs=s.auditLogs,console.log("Order details:",s),this.calculateProgressValue()},error:s=>{console.error("Error fetching order details:",s)}})}calculateProgressValue(){return this.progressValue=(this.statuses.indexOf(this.order.status)+1)*(100/this.statuses.length),this.progressValue}static{this.\u0275fac=function(s){return new(s||r)(g(O),g(C))}}static{this.\u0275cmp=f({type:r,selectors:[["app-order-processing-view"]],decls:13,vars:6,consts:[[1,"container"],[1,"my-4"],["class","mb-4",4,"ngIf"],["color","success","variant","striped",3,"animated","value"],[1,"mt-4"],[4,"ngIf"],[1,"mb-4"],[1,"table","table-striped"],[4,"ngFor","ngForOf"]],template:function(s,m){s&1&&(n(0,"div",0)(1,"h2",1),t(2,"Order Details"),e(),p(3,y,15,4,"div",2),n(4,"h4"),t(5,"Order Progress"),e(),n(6,"c-progress-stacked")(7,"c-progress",3),t(8),e()(),n(9,"h4",4),t(10,"Audit Logs"),e(),p(11,D,14,1,"div",5)(12,b,3,0,"div",5),e()),s&2&&(o(3),a("ngIf",m.order),o(4),a("animated",!0)("value",m.progressValue),o(),d(m.order.status),o(3),a("ngIf",m.auditLogs.length>0),o(),a("ngIf",m.auditLogs.length===0))},dependencies:[I,h,S,E,P,_],encapsulation:2})}}return r})();export{k as OrderProcessingViewComponent};
